{"version":3,"sources":["./src/app/videojuegos/videojuego-form/videojuego-form.module.ts","./src/app/videojuegos/videojuego-form/videojuego-form.page.html","./src/app/videojuegos/services/plataforma.service.ts","./src/app/videojuegos/videojuego-form/videojuego-form.page.ts","./src/app/videojuegos/videojuego-form/videojuego-form.page.scss"],"names":[],"mappings":"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","file":"videojuego-form-videojuego-form-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { VideojuegoFormPage } from './videojuego-form.page';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: VideojuegoFormPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [VideojuegoFormPage]\r\n})\r\nexport class VideojuegoFormPageModule {}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title *ngIf=\\\"editando\\\">\\r\\n      Editar videojuego\\r\\n    </ion-title>\\r\\n    <ion-title *ngIf=\\\"!editando\\\">\\r\\n      Nuevo videojuego\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content padding>\\r\\n  <form #productForm=\\\"ngForm\\\" (ngSubmit)=\\\"enviarFormulario()\\\">\\r\\n    <ion-list>\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"floating\\\">Title</ion-label>\\r\\n        <ion-input minlength=\\\"5\\\" name=\\\"title\\\" required [(ngModel)]=\\\"nuevoVideojuego.nombre\\\" #titleModel=\\\"ngModel\\\"></ion-input>\\r\\n        <ion-icon name=\\\"checkmark-circle\\\" slot=\\\"end\\\" color=\\\"success\\\" *ngIf=\\\"titleModel.dirty && titleModel.valid\\\"></ion-icon>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"floating\\\">Description</ion-label>\\r\\n        <ion-input name=\\\"description\\\" required [(ngModel)]=\\\"nuevoVideojuego.descripcion\\\" #descriptionModel=\\\"ngModel\\\"></ion-input>\\r\\n        <ion-icon name=\\\"checkmark-circle\\\" slot=\\\"end\\\" color=\\\"success\\\" *ngIf=\\\"descriptionModel.dirty && descriptionModel.valid\\\"></ion-icon>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"floating\\\">Category</ion-label>\\r\\n        <ion-select required #categoryModel=\\\"ngModel\\\" name=\\\"category\\\" [(ngModel)]=\\\"nuevoVideojuego.plataforma\\\">\\r\\n          <ion-select-option value=\\\"0\\\">Choose a category...</ion-select-option>\\r\\n          <ion-select-option *ngFor=\\\"let plataforma of plataformas\\\" [value]=\\\"plataforma.id\\\">{{plataforma.nombre}}</ion-select-option>\\r\\n        </ion-select>\\r\\n        <ion-icon name=\\\"checkmark-circle\\\" slot=\\\"end\\\" color=\\\"success\\\" *ngIf=\\\"categoryModel.dirty && categoryModel.valid && categoryModel.value !== 0\\\"></ion-icon>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"floating\\\">Price</ion-label>\\r\\n        <ion-input type=\\\"number\\\" min=\\\"0.00\\\" step=\\\"0.01\\\" name=\\\"price\\\" required [(ngModel)]=\\\"nuevoVideojuego.precio\\\" #priceModel=\\\"ngModel\\\"></ion-input>\\r\\n        <ion-icon name=\\\"checkmark-circle\\\" slot=\\\"end\\\" color=\\\"success\\\" *ngIf=\\\"priceModel.dirty && priceModel.valid\\\"></ion-icon>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"floating\\\">Stock</ion-label>\\r\\n        <ion-input type=\\\"number\\\" min=\\\"0\\\" name=\\\"stock\\\" required [(ngModel)]=\\\"nuevoVideojuego.stock\\\" #stockModel=\\\"ngModel\\\"></ion-input>\\r\\n        <ion-icon name=\\\"checkmark-circle\\\" slot=\\\"end\\\" color=\\\"success\\\" *ngIf=\\\"stockModel.dirty && stockModel.valid\\\"></ion-icon>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"inset\\\">Image</ion-label>\\r\\n        <ion-button color=\\\"secondary\\\" (click)=\\\"obtenerFotoCamara()\\\">\\r\\n          <ion-icon name=\\\"camera\\\" slot=\\\"start\\\"></ion-icon>\\r\\n          Camera\\r\\n        </ion-button>\\r\\n        <ion-button color=\\\"tertiary\\\" (click)=\\\"obtenerFotoGaleria()\\\">\\r\\n          <ion-icon name=\\\"images\\\" slot=\\\"start\\\"></ion-icon>\\r\\n          Gallery\\r\\n        </ion-button>\\r\\n      </ion-item>\\r\\n    </ion-list>\\r\\n\\r\\n    <ion-img [src]=\\\"nuevoVideojuego.imagen\\\" *ngIf=\\\"nuevoVideojuego.imagen && !editando\\\"></ion-img>\\r\\n\\r\\n    <ion-img *ngIf=\\\"editando\\\" [src]=\\\"nuevoVideojuego.imagen\\\"></ion-img>\\r\\n\\r\\n    <ion-grid>\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <ion-button *ngIf=\\\"!editando\\\" type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\" [disabled]=\\\"productForm.invalid || !nuevoVideojuego.imagen\\\">\\r\\n            <ion-icon name=\\\"paper-plane\\\" slot=\\\"start\\\"></ion-icon>\\r\\n            Subir videojuego\\r\\n          </ion-button>\\r\\n\\r\\n          <ion-button *ngIf=\\\"editando\\\" type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\" [disabled]=\\\"productForm.invalid || !nuevoVideojuego.imagen\\\">\\r\\n            <ion-icon name=\\\"paper-plane\\\" slot=\\\"start\\\"></ion-icon>\\r\\n            Editar videojuego\\r\\n          </ion-button>\\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n          <ion-button color=\\\"danger\\\" expand=\\\"block\\\" fill=\\\"outline\\\" [routerLink]=\\\"['/videojuegos']\\\" [routerDirection]=\\\"'root'\\\">\\r\\n            <ion-icon name=\\\"arrow-undo\\\" slot=\\\"start\\\"></ion-icon>\\r\\n            Cancelar\\r\\n          </ion-button>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  </form>\\r\\n</ion-content>\\r\\n\";","import { HttpClient, HttpErrorResponse } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError, map } from 'rxjs/operators';\r\nimport { PlataformasResponse } from 'src/app/interfaces/Responses';\r\nimport { Plataforma } from '../interfaces/Plataforma';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PlataformaService {\r\n  private readonly URL = 'plataformas';\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  obtenerPlataformas(): Observable<Plataforma[]> {\r\n    return this.http.get<PlataformasResponse>(this.URL).pipe(\r\n      map(resp => resp.data),\r\n      catchError((error: HttpErrorResponse) => {\r\n        return throwError(`Error ${error.status}. No se obtuvieron las plataformas`)\r\n      })\r\n    )\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Camera, CameraResultType, CameraSource } from '@capacitor/core';\r\nimport { NavController } from '@ionic/angular';\r\nimport { CameraPlugin } from 'src/app/interfaces/native-plugins/CameraPlugin';\r\nimport { Plataforma } from '../interfaces/Plataforma';\r\nimport { VideojuegoNuevo } from '../interfaces/VideojuegoNuevo';\r\nimport { PlataformaService } from '../services/plataforma.service';\r\nimport { VideojuegoService } from '../services/videojuego.service';\r\n\r\n@Component({\r\n  selector: 'app-videojuego-form',\r\n  templateUrl: './videojuego-form.page.html',\r\n  styleUrls: ['./videojuego-form.page.scss'],\r\n})\r\nexport class VideojuegoFormPage implements OnInit, CameraPlugin {\r\n  nuevoVideojuego: VideojuegoNuevo = {\r\n    nombre: '',\r\n    descripcion: '',\r\n    precio: 0,\r\n    imagen: '',\r\n    plataforma: 0\r\n  };\r\n\r\n  plataformas: Plataforma[];\r\n  editando: boolean = false;\r\n\r\n  constructor(\r\n    private plataformaService: PlataformaService,\r\n    private videojuegoService: VideojuegoService,\r\n    private route: ActivatedRoute,\r\n    private nav: NavController\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.plataformaService.obtenerPlataformas().subscribe(\r\n      plataformas => this.plataformas = plataformas,\r\n      (error: string) => console.error(error)\r\n    );\r\n\r\n    if (this.route.snapshot.params.id !== undefined) {\r\n      const id = this.route.snapshot.params.id;\r\n\r\n      this.videojuegoService.obtenerVideojuego(parseInt(id)).subscribe(\r\n        resp => {\r\n          console.warn(resp);\r\n          this.nuevoVideojuego = {\r\n            id: resp.id,\r\n            nombre: resp.nombre,\r\n            descripcion: resp.descripcion,\r\n            precio: resp.precio,\r\n            imagen: resp.imagen,\r\n            plataforma: resp.plataforma.id,\r\n            stock: resp.stock\r\n          };\r\n\r\n          this.editando = true;\r\n        }\r\n      )\r\n    }\r\n  }\r\n\r\n  enviarFormulario() {\r\n    if (this.editando) {\r\n      this.editarVideojuego();\r\n    } else {\r\n      this.subirVideojuego();\r\n    }\r\n  }\r\n\r\n  subirVideojuego() {\r\n    this.videojuegoService.subirVideojuego(this.nuevoVideojuego).subscribe(\r\n      async () => {\r\n        await console.log('aloha 2');\r\n      }\r\n    )\r\n  }\r\n\r\n  editarVideojuego() {\r\n    this.videojuegoService.editarVideojuego(this.nuevoVideojuego).subscribe(\r\n      async () => {\r\n        console.log('editado');\r\n        await this.nav.navigateRoot(['/videojuegos']);\r\n      }\r\n    )\r\n  }\r\n\r\n  async obtenerFotoCamara() {\r\n    const foto = await Camera.getPhoto({\r\n      source: CameraSource.Camera,\r\n      quality: 90,\r\n      height: 640,\r\n      width: 640,\r\n      resultType: CameraResultType.DataUrl\r\n    });\r\n\r\n    this.nuevoVideojuego.imagen = foto.dataUrl;\r\n  }\r\n\r\n  async obtenerFotoGaleria() {\r\n    const foto = await Camera.getPhoto({\r\n      source: CameraSource.Photos,\r\n      height: 640,\r\n      width: 640,\r\n      resultType: CameraResultType.DataUrl\r\n    });\r\n\r\n    this.nuevoVideojuego.imagen = foto.dataUrl;\r\n  }\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ2aWRlb2p1ZWdvLWZvcm0ucGFnZS5zY3NzIn0= */\";"],"sourceRoot":"webpack:///"}