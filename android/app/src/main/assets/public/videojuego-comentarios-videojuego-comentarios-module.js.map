{"version":3,"sources":["./src/app/videojuegos/videojuego-detalles/videojuego-comentarios/videojuego-comentarios.module.ts","./src/app/videojuegos/videojuego-detalles/videojuego-comentarios/videojuego-comentarios.page.html","./src/app/videojuegos/services/comentario.service.ts","./src/app/videojuegos/videojuego-detalles/videojuego-comentarios/videojuego-comentarios.page.scss","./src/app/videojuegos/videojuego-detalles/videojuego-comentarios/videojuego-comentarios.page.ts"],"names":[],"mappings":"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","file":"videojuego-comentarios-videojuego-comentarios-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { VideojuegoComentariosPage } from './videojuego-comentarios.page';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: VideojuegoComentariosPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [VideojuegoComentariosPage]\r\n})\r\nexport class VideojuegoComentariosPageModule {}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Comentarios</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-item-sliding *ngFor=\\\"let comentario of comentarios\\\">\\r\\n    <ion-item>\\r\\n      <ion-avatar slot=\\\"start\\\">\\r\\n        <img [src]=\\\"comentario.usuario.avatar\\\" alt=\\\"\\\">\\r\\n      </ion-avatar>\\r\\n      <ion-label>\\r\\n        <h3>{{comentario.usuario.nickname}}</h3>\\r\\n        <p>{{comentario.texto}}</p>\\r\\n      </ion-label>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item-options side=\\\"end\\\">\\r\\n      <ion-item-option color=\\\"danger\\\" (click)=\\\"borrarComentario(comentario.id)\\\">\\r\\n        <ion-icon name=\\\"trash\\\"></ion-icon>\\r\\n      </ion-item-option>\\r\\n    </ion-item-options>\\r\\n  </ion-item-sliding>\\r\\n\\r\\n  <div *ngIf=\\\"error\\\" class=\\\"alert alert-warning\\\">\\r\\n    {{error}}\\r\\n  </div>\\r\\n</ion-content>\\r\\n<ion-item-divider></ion-item-divider>\\r\\n<ion-item>\\r\\n  <ion-input placeholder=\\\"Comenta aquÃ­\\\" [(ngModel)]=\\\"comentario.texto\\\"></ion-input>\\r\\n  <ion-button (click)=\\\"comentar()\\\" color=\\\"light\\\">Comentar</ion-button>\\r\\n</ion-item>\\r\\n\";","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError, map } from 'rxjs/operators';\r\nimport { ComentarioResponse, ComentariosResponse } from 'src/app/interfaces/Responses';\r\nimport { Comentario } from '../interfaces/Comentario';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ComentarioService {\r\n  private readonly comentarioUrl = 'comentarios';\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  obtenerComentarios(id: number): Observable<Comentario[]> {\r\n    return this.http.get<ComentariosResponse>(`videojuegos/${id}/${this.comentarioUrl}`).pipe(\r\n      map(resp => resp.data),\r\n      catchError((error: any) => {\r\n        return throwError(error.error);\r\n      })\r\n    )\r\n  }\r\n\r\n  nuevoComentario(id: number, comentario: Comentario): Observable<Comentario> {\r\n    return this.http.post<ComentarioResponse>(`videojuegos/${id}/comentario`, {\r\n      comentario: comentario.texto\r\n    }).pipe(\r\n      map(resp => resp.data)\r\n    );\r\n  }\r\n\r\n  borrarComentario(idVideojuego: number, idComentario: number): Observable<void> {\r\n    return this.http.delete<void>(`videojuegos/${idVideojuego}/comentario/${idComentario}`);\r\n  }\r\n}\r\n","export default \".alert-warning {\\n  background: darkblue;\\n  opacity: 0.8;\\n  color: #fff;\\n}\\n\\nion-icon {\\n  font-size: 25px;\\n}\\n\\nion-item-option {\\n  width: 70px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFwuLlxcdmlkZW9qdWVnby1jb21lbnRhcmlvcy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxvQkFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0FBQ0Y7O0FBRUE7RUFDRSxlQUFBO0FBQ0Y7O0FBRUE7RUFDRSxXQUFBO0FBQ0YiLCJmaWxlIjoidmlkZW9qdWVnby1jb21lbnRhcmlvcy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYWxlcnQtd2FybmluZyB7XHJcbiAgYmFja2dyb3VuZDogZGFya2JsdWU7XHJcbiAgb3BhY2l0eTogMC44O1xyXG4gIGNvbG9yOiAjZmZmO1xyXG59XHJcblxyXG5pb24taWNvbiB7XHJcbiAgZm9udC1zaXplOiAyNXB4O1xyXG59XHJcblxyXG5pb24taXRlbS1vcHRpb24ge1xyXG4gIHdpZHRoOiA3MHB4O1xyXG59XHJcbiJdfQ== */\";","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { Comentario } from '../../interfaces/Comentario';\r\nimport { ComentarioService } from '../../services/comentario.service';\r\nimport { VideojuegoDetallesPage } from '../videojuego-detalles.page';\r\n\r\n@Component({\r\n  selector: 'app-videojuego-comentarios',\r\n  templateUrl: './videojuego-comentarios.page.html',\r\n  styleUrls: ['./videojuego-comentarios.page.scss'],\r\n})\r\nexport class VideojuegoComentariosPage implements OnInit {\r\n  comentarios: Comentario[] = [];\r\n  idVideojuego: number;\r\n  error: string;\r\n\r\n  comentario: Comentario = {\r\n    texto: ''\r\n  };\r\n\r\n  constructor(\r\n    private comentarioService: ComentarioService,\r\n    @Inject(VideojuegoDetallesPage) private parentComponent: VideojuegoDetallesPage\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.idVideojuego = this.parentComponent.videojuego.id;\r\n    this.obtenerComentarios(this.idVideojuego);\r\n  }\r\n\r\n  obtenerComentarios(id: number) {\r\n    this.comentarioService.obtenerComentarios(id).subscribe(\r\n      resp => {\r\n        this.comentarios = resp;\r\n      },\r\n      error => {\r\n        this.error = error.errores.mensaje;\r\n      }\r\n    );\r\n  }\r\n\r\n  comentar() {\r\n    this.comentarioService.nuevoComentario(this.idVideojuego, this.comentario).subscribe(\r\n      resp => {\r\n        this.comentarios.push(resp);\r\n        this.comentario.texto = '';\r\n\r\n        if (this.error) {\r\n          this.error = null;\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  borrarComentario(idComentario: number) {\r\n    this.comentarioService.borrarComentario(this.idVideojuego, idComentario).subscribe(\r\n      () => {\r\n        this.obtenerComentarios(this.idVideojuego);\r\n\r\n        if (this.comentarios.length === 1) {\r\n          this.comentarios = [];\r\n        }\r\n      }\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}