{"version":3,"sources":["./src/app/videojuegos/videojuego-detalles/videojuego-comentarios/videojuego-comentarios.module.ts","./src/app/videojuegos/videojuego-detalles/videojuego-comentarios/videojuego-comentarios.page.html","./src/app/videojuegos/services/comentario.service.ts","./src/app/videojuegos/videojuego-detalles/videojuego-comentarios/videojuego-comentarios.page.scss","./src/app/videojuegos/videojuego-detalles/videojuego-comentarios/videojuego-comentarios.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAyC;AACM;AACF;AAEA;AAE6B;AACnB;AAEvD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,sFAAyB;KACrC;CACF,CAAC;IAWW,+BAA+B,SAA/B,+BAA+B;CAAG;AAAlC,+BAA+B;IAT3C,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;SAC9B;QACD,YAAY,EAAE,CAAC,sFAAyB,CAAC;KAC1C,CAAC;GACW,+BAA+B,CAAG;AAAH;;;;;;;;;;;;;ACzB5C;AAAe,miBAAoe,6BAA6B,oBAAoB,kBAAkB,+VAA+V,OAAO,kQAAkQ,E;;;;;;;;;;;;;;;;;;;;ACA5mC;AACP;AACG;AACG;IAOpC,iBAAiB,SAAjB,iBAAiB;IAG5B,YAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;QAFnB,kBAAa,GAAG,aAAa,CAAC;IAEP,CAAC;IAEzC,kBAAkB,CAAC,EAAU;QAC3B,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAsB,eAAe,EAAE,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,IAAI,CACvF,0DAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,EACtB,iEAAU,CAAC,CAAC,KAAU,EAAE,EAAE;YACxB,OAAO,uDAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACjC,CAAC,CAAC,CACH;IACH,CAAC;IAED,eAAe,CAAC,EAAU,EAAE,UAAsB;QAChD,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAqB,eAAe,EAAE,aAAa,EAAE;YACxE,UAAU,EAAE,UAAU,CAAC,KAAK;SAC7B,CAAC,CAAC,IAAI,CACL,0DAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CACvB,CAAC;IACJ,CAAC;IAED,gBAAgB,CAAC,YAAoB,EAAE,YAAoB;QACzD,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAO,eAAe,YAAY,eAAe,YAAY,EAAE,CAAC,CAAC;IAC1F,CAAC;CACF;;YAnCQ,+DAAU;;AAUN,iBAAiB;IAH7B,gEAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,iBAAiB,CAyB7B;AAzB6B;;;;;;;;;;;;;ACV9B;AAAe,gFAAiB,yBAAyB,iBAAiB,gBAAgB,GAAG,cAAc,oBAAoB,GAAG,qBAAqB,gBAAgB,GAAG,6CAA6C,2iBAA2iB,E;;;;;;;;;;;;;;;;;;;;;;;ACAxsB;AAEY;AACD;IAOxD,yBAAyB,SAAzB,yBAAyB;IASpC,YACU,iBAAoC,EACJ,eAAuC;QADvE,sBAAiB,GAAjB,iBAAiB,CAAmB;QACJ,oBAAe,GAAf,eAAe,CAAwB;QAVjF,gBAAW,GAAiB,EAAE,CAAC;QAI/B,eAAU,GAAe;YACvB,KAAK,EAAE,EAAE;SACV,CAAC;IAKE,CAAC;IAEL,QAAQ;QACN,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,EAAE,CAAC;QACvD,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAC7C,CAAC;IAED,kBAAkB,CAAC,EAAU;QAC3B,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,EAAE,CAAC,CAAC,SAAS,CACrD,IAAI,CAAC,EAAE;YACL,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QAC1B,CAAC,EACD,KAAK,CAAC,EAAE;YACN,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC;QACrC,CAAC,CACF,CAAC;IACJ,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,SAAS,CAClF,IAAI,CAAC,EAAE;YACL,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC5B,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,EAAE,CAAC;YAE3B,IAAI,IAAI,CAAC,KAAK,EAAE;gBACd,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;aACnB;QACH,CAAC,CACF,CAAC;IACJ,CAAC;IAED,gBAAgB,CAAC,YAAoB;QACnC,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC,IAAI,CAAC,YAAY,EAAE,YAAY,CAAC,CAAC,SAAS,CAChF,GAAG,EAAE;YACH,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAE3C,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;gBACjC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;aACvB;QACH,CAAC,CACF,CAAC;IACJ,CAAC;CACF;;YA9DQ,8EAAiB;YACjB,gFAAsB,uBAkB1B,oDAAM,SAAC,gFAAsB;;AAXrB,yBAAyB;IALrC,+DAAS,CAAC;QACT,QAAQ,EAAE,4BAA4B;QACtC,8FAAiD;;KAElD,CAAC;GACW,yBAAyB,CAsDrC;AAtDqC","file":"videojuego-comentarios-videojuego-comentarios-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { VideojuegoComentariosPage } from './videojuego-comentarios.page';\nimport { RouterModule, Routes } from '@angular/router';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: VideojuegoComentariosPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [VideojuegoComentariosPage]\n})\nexport class VideojuegoComentariosPageModule {}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Comentarios</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-item-sliding *ngFor=\\\"let comentario of comentarios\\\">\\n    <ion-item>\\n      <ion-avatar slot=\\\"start\\\">\\n        <img [src]=\\\"'http://localhost:8000/img/users/' + comentario.usuario.avatar\\\" alt=\\\"\\\">\\n      </ion-avatar>\\n      <ion-label>\\n        <h3>{{comentario.usuario.nickname}}</h3>\\n        <p>{{comentario.texto}}</p>\\n      </ion-label>\\n    </ion-item>\\n\\n    <ion-item-options side=\\\"end\\\">\\n      <ion-item-option color=\\\"danger\\\" (click)=\\\"borrarComentario(comentario.id)\\\">\\n        <ion-icon name=\\\"trash\\\"></ion-icon>\\n      </ion-item-option>\\n    </ion-item-options>\\n  </ion-item-sliding>\\n\\n  <div *ngIf=\\\"error\\\" class=\\\"alert alert-warning\\\">\\n    {{error}}\\n  </div>\\n</ion-content>\\n<ion-item-divider></ion-item-divider>\\n<ion-item>\\n  <ion-input placeholder=\\\"Comenta aquÃ­\\\" [(ngModel)]=\\\"comentario.texto\\\"></ion-input>\\n  <ion-button (click)=\\\"comentar()\\\" color=\\\"light\\\">Comentar</ion-button>\\n</ion-item>\\n\";","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { ComentarioResponse, ComentariosResponse } from 'src/app/interfaces/Responses';\nimport { Comentario } from '../interfaces/Comentario';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ComentarioService {\n  private readonly comentarioUrl = 'comentarios';\n\n  constructor(private http: HttpClient) { }\n\n  obtenerComentarios(id: number): Observable<Comentario[]> {\n    return this.http.get<ComentariosResponse>(`videojuegos/${id}/${this.comentarioUrl}`).pipe(\n      map(resp => resp.data),\n      catchError((error: any) => {\n        return throwError(error.error);\n      })\n    )\n  }\n\n  nuevoComentario(id: number, comentario: Comentario): Observable<Comentario> {\n    return this.http.post<ComentarioResponse>(`videojuegos/${id}/comentario`, {\n      comentario: comentario.texto\n    }).pipe(\n      map(resp => resp.data)\n    );\n  }\n\n  borrarComentario(idVideojuego: number, idComentario: number): Observable<void> {\n    return this.http.delete<void>(`videojuegos/${idVideojuego}/comentario/${idComentario}`);\n  }\n}\n","export default \".alert-warning {\\n  background: darkblue;\\n  opacity: 0.8;\\n  color: #fff;\\n}\\n\\nion-icon {\\n  font-size: 25px;\\n}\\n\\nion-item-option {\\n  width: 70px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFwuLlxcdmlkZW9qdWVnby1jb21lbnRhcmlvcy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxvQkFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0FBQ0Y7O0FBRUE7RUFDRSxlQUFBO0FBQ0Y7O0FBRUE7RUFDRSxXQUFBO0FBQ0YiLCJmaWxlIjoidmlkZW9qdWVnby1jb21lbnRhcmlvcy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYWxlcnQtd2FybmluZyB7XG4gIGJhY2tncm91bmQ6IGRhcmtibHVlO1xuICBvcGFjaXR5OiAwLjg7XG4gIGNvbG9yOiAjZmZmO1xufVxuXG5pb24taWNvbiB7XG4gIGZvbnQtc2l6ZTogMjVweDtcbn1cblxuaW9uLWl0ZW0tb3B0aW9uIHtcbiAgd2lkdGg6IDcwcHg7XG59XG4iXX0= */\";","import { Component, Inject, OnInit } from '@angular/core';\nimport { Comentario } from '../../interfaces/Comentario';\nimport { ComentarioService } from '../../services/comentario.service';\nimport { VideojuegoDetallesPage } from '../videojuego-detalles.page';\n\n@Component({\n  selector: 'app-videojuego-comentarios',\n  templateUrl: './videojuego-comentarios.page.html',\n  styleUrls: ['./videojuego-comentarios.page.scss'],\n})\nexport class VideojuegoComentariosPage implements OnInit {\n  comentarios: Comentario[] = [];\n  idVideojuego: number;\n  error: string;\n\n  comentario: Comentario = {\n    texto: ''\n  };\n\n  constructor(\n    private comentarioService: ComentarioService,\n    @Inject(VideojuegoDetallesPage) private parentComponent: VideojuegoDetallesPage\n  ) { }\n\n  ngOnInit() {\n    this.idVideojuego = this.parentComponent.videojuego.id;\n    this.obtenerComentarios(this.idVideojuego);\n  }\n\n  obtenerComentarios(id: number) {\n    this.comentarioService.obtenerComentarios(id).subscribe(\n      resp => {\n        this.comentarios = resp;\n      },\n      error => {\n        this.error = error.errores.mensaje;\n      }\n    );\n  }\n\n  comentar() {\n    this.comentarioService.nuevoComentario(this.idVideojuego, this.comentario).subscribe(\n      resp => {\n        this.comentarios.push(resp);\n        this.comentario.texto = '';\n\n        if (this.error) {\n          this.error = null;\n        }\n      }\n    );\n  }\n\n  borrarComentario(idComentario: number) {\n    this.comentarioService.borrarComentario(this.idVideojuego, idComentario).subscribe(\n      () => {\n        this.obtenerComentarios(this.idVideojuego);\n\n        if (this.comentarios.length === 1) {\n          this.comentarios = [];\n        }\n      }\n    );\n  }\n}\n"],"sourceRoot":"webpack:///"}