{"version":3,"sources":["./src/app/features/historial-compras/historial-compras/historial-compras.page.ts","./src/app/features/historial-compras/services/historial-compras.service.ts","./src/app/features/historial-compras/historial-compras/historial-compras.page.html","./src/app/features/historial-compras/historial-compras/historial-compras.page.scss","./src/app/features/historial-compras/historial-compras/historial-compras.module.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAkD;AAE8B;AAE/C;AACuF;IAO3G,oBAAoB,SAApB,oBAAoB;IAI/B,YAAoB,sBAA+C,EAAU,kBAA+C;QAAxG,2BAAsB,GAAtB,sBAAsB,CAAyB;QAAU,uBAAkB,GAAlB,kBAAkB,CAA6B;QAF5H,gBAAW,GAAW,EAAE,CAAC;IAEuG,CAAC;IAEjI,QAAQ;QACN,8CAA8C;QAC9C,6CAAa,CAAC,IAAI,CAAC,CAAC;QAEpB,IAAI,CAAC,uBAAuB,EAAE,CAAC;IACjC,CAAC;IAED,uBAAuB;QACrB,IAAI,CAAC,sBAAsB,CAAC,uBAAuB,EAAE,CAAC,SAAS,CAC7D,IAAI,CAAC,EAAE;YACL,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YAEpB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBAC5B,MAAM,CAAC,WAAW,GAAG,mCAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,OAAO,EAAE,CAAC;YAC5D,CAAC,CAAC,CAAC;QACL,CAAC,CACF;IACH,CAAC;IAEK,gBAAgB,CAAC,WAAmB;;YACxC,IAAI,CAAC,kBAAkB,CAAC,uBAAuB,CAAC,WAAW,CAAC,CAAC;QAC/D,CAAC;KAAA;CACF;;YAtCQ,2FAAuB;YAGvB,qIAA2B;;AAOvB,oBAAoB;IALhC,+DAAS,CAAC;QACT,QAAQ,EAAE,uBAAuB;QACjC,yFAA4C;;KAE7C,CAAC;GACW,oBAAoB,CA4BhC;AA5BgC;;;;;;;;;;;;;;;;;;;;ACZiB;AACP;AAEN;IAOxB,uBAAuB,SAAvB,uBAAuB;IAGlC,YAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;QAFnB,iBAAY,GAAG,SAAS,CAAC;IAEF,CAAC;IAEzC,uBAAuB;QACrB,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAkB,eAAe,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,IAAI,CAC5E,0DAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CACvB,CAAC;IACJ,CAAC;CACF;;YApBQ,+DAAU;;AAUN,uBAAuB;IAHnC,gEAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,uBAAuB,CAUnC;AAVmC;;;;;;;;;;;;;ACVpC;AAAe,wWAAyS,oBAAoB,sCAAsC,WAAW,yCAAyC,oBAAoB,yZAAyZ,E;;;;;;;;;;;;ACAn1B;AAAe,6GAA8C,mIAAmI,E;;;;;;;;;;;;;;;;;;;;;;ACAvJ;AACM;AACF;AAEA;AAEmB;AACT;AAGvD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,4EAAoB;KAChC;CACF,CAAC;IAWW,0BAA0B,SAA1B,0BAA0B;CAAG;AAA7B,0BAA0B;IATtC,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;SAC9B;QACD,YAAY,EAAE,CAAC,4EAAoB,CAAC;KACrC,CAAC;GACW,0BAA0B,CAAG;AAAH","file":"historial-compras-historial-compras-historial-compras-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Compra } from '../../interfaces/Compra';\r\nimport { HistorialComprasService } from '../services/historial-compras.service';\r\n\r\nimport * as moment from 'moment';\r\nimport { ModalDetalleCompraComponent } from 'src/app/shared/modals/modal-detalle-compra/modal-detalle-compra.component';\r\n\r\n@Component({\r\n  selector: 'app-historial-compras',\r\n  templateUrl: './historial-compras.page.html',\r\n  styleUrls: ['./historial-compras.page.scss'],\r\n})\r\nexport class HistorialComprasPage implements OnInit {\r\n  compras: Compra[];\r\n  fechaCompra: string = '';\r\n\r\n  constructor(private historialCompraService: HistorialComprasService, private modalDetalleCompra: ModalDetalleCompraComponent) { }\r\n\r\n  ngOnInit() {\r\n    //Configurar librería moment en idioma español\r\n    moment.locale('es');\r\n\r\n    this.obtenerHistorialCompras();\r\n  }\r\n\r\n  obtenerHistorialCompras() {\r\n    this.historialCompraService.obtenerHistorialCompras().subscribe(\r\n      resp => {\r\n        this.compras = resp;\r\n\r\n        this.compras.forEach(compra => {\r\n          compra.fechaCompra = moment(compra.fechaCompra).fromNow();\r\n        });\r\n      }\r\n    )\r\n  }\r\n\r\n  async verDetalleCompra(lineaCompra: number) {\r\n    this.modalDetalleCompra.crearModalDetalleCompra(lineaCompra);\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { Compra } from '../../interfaces/Compra';\r\nimport { ComprasResponse } from '../../interfaces/Responses';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class HistorialComprasService {\r\n  private readonly historialUrl = 'history';\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  obtenerHistorialCompras(): Observable<Compra[]> {\r\n    return this.http.get<ComprasResponse>(`profile/buy/${this.historialUrl}`).pipe(\r\n      map(resp => resp.data)\r\n    );\r\n  }\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>Mis compras</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-list>\\r\\n    <ion-item *ngFor=\\\"let compra of compras\\\">\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <ion-label>\\r\\n            <h2>Realizado: {{compra.fechaCompra}}</h2>\\r\\n            <h2>Nº compra: {{compra.id}}</h2>\\r\\n            <h2>Linea compra: {{compra.lineaCompra}}</h2>\\r\\n          </ion-label>\\r\\n        </ion-col>\\r\\n        <ion-col class=\\\"ion-align-items-center\\\">\\r\\n          <ion-button size=\\\"small\\\" fill=\\\"clear\\\" (click)=\\\"verDetalleCompra(compra.lineaCompra)\\\">\\r\\n            <ion-icon slot=\\\"icon-only\\\" name=\\\"eye\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n</ion-content>\\r\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJoaXN0b3JpYWwtY29tcHJhcy5wYWdlLnNjc3MifQ== */\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { HistorialComprasPage } from './historial-compras.page';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: HistorialComprasPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [HistorialComprasPage]\r\n})\r\nexport class HistorialComprasPageModule {}\r\n"],"sourceRoot":"webpack:///"}