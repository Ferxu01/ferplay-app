{"version":3,"sources":["./src/app/features/historial-compras/historial-compras/historial-compras.page.ts","./src/app/features/historial-compras/services/historial-compras.service.ts","./src/app/features/historial-compras/historial-compras/historial-compras.page.html","./src/app/features/historial-compras/historial-compras/historial-compras.page.scss","./src/app/features/historial-compras/historial-compras/historial-compras.module.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAkD;AAE8B;AAE/C;AACgB;AAC4B;IAOhE,oBAAoB,SAApB,oBAAoB;IAI/B,YAAoB,sBAA+C,EAAU,SAA0B;QAAnF,2BAAsB,GAAtB,sBAAsB,CAAyB;QAAU,cAAS,GAAT,SAAS,CAAiB;QAFvG,gBAAW,GAAW,EAAE,CAAC;IAEkF,CAAC;IAE5G,QAAQ;QACN,8CAA8C;QAC9C,6CAAa,CAAC,IAAI,CAAC,CAAC;QAEpB,IAAI,CAAC,uBAAuB,EAAE,CAAC;IACjC,CAAC;IAED,uBAAuB;QACrB,IAAI,CAAC,sBAAsB,CAAC,uBAAuB,EAAE,CAAC,SAAS,CAC7D,IAAI,CAAC,EAAE;YACL,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YAEpB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBAC5B,MAAM,CAAC,WAAW,GAAG,mCAAM,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,OAAO,EAAE,CAAC;YAC5D,CAAC,CAAC,CAAC;QACL,CAAC,CACF;IACH,CAAC;IAEK,gBAAgB;;YACpB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACxC,SAAS,EAAE,wFAAkB;aAC9B,CAAC,CAAC;YACH,OAAO,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QAC/B,CAAC;KAAA;CACF;;YA1CQ,2FAAuB;YAGvB,8DAAe;;AAQX,oBAAoB;IALhC,+DAAS,CAAC;QACT,QAAQ,EAAE,uBAAuB;QACjC,yFAA4C;;KAE7C,CAAC;GACW,oBAAoB,CA+BhC;AA/BgC;;;;;;;;;;;;;;;;;;;;ACbiB;AACP;AAEN;IAOxB,uBAAuB,SAAvB,uBAAuB;IAGlC,YAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;QAFnB,iBAAY,GAAG,SAAS,CAAC;IAEF,CAAC;IAEzC,uBAAuB;QACrB,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAkB,eAAe,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,IAAI,CAC5E,0DAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CACvB,CAAC;IACJ,CAAC;CACF;;YApBQ,+DAAU;;AAUN,uBAAuB;IAHnC,gEAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,uBAAuB,CAUnC;AAVmC;;;;;;;;;;;;;ACVpC;AAAe,gVAAiR,oBAAoB,oCAAoC,WAAW,+WAA+W,E;;;;;;;;;;;;ACAltB;AAAe,6GAA8C,mIAAmI,E;;;;;;;;;;;;;;;;;;;;;;ACAvJ;AACM;AACF;AAEA;AAEmB;AACT;AAEvD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,4EAAoB;KAChC;CACF,CAAC;IAWW,0BAA0B,SAA1B,0BAA0B;CAAG;AAA7B,0BAA0B;IATtC,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;SAC9B;QACD,YAAY,EAAE,CAAC,4EAAoB,CAAC;KACrC,CAAC;GACW,0BAA0B,CAAG;AAAH","file":"historial-compras-historial-compras-historial-compras-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Compra } from '../../interfaces/Compra';\nimport { HistorialComprasService } from '../services/historial-compras.service';\n\nimport * as moment from 'moment';\nimport { ModalController } from '@ionic/angular';\nimport { DetallesCompraPage } from '../detalles-compra/detalles-compra.page';\n\n@Component({\n  selector: 'app-historial-compras',\n  templateUrl: './historial-compras.page.html',\n  styleUrls: ['./historial-compras.page.scss'],\n})\nexport class HistorialComprasPage implements OnInit {\n  compras: Compra[];\n  fechaCompra: string = '';\n\n  constructor(private historialCompraService: HistorialComprasService, private modalCtrl: ModalController) { }\n\n  ngOnInit() {\n    //Configurar librería moment en idioma español\n    moment.locale('es');\n\n    this.obtenerHistorialCompras();\n  }\n\n  obtenerHistorialCompras() {\n    this.historialCompraService.obtenerHistorialCompras().subscribe(\n      resp => {\n        this.compras = resp;\n\n        this.compras.forEach(compra => {\n          compra.fechaCompra = moment(compra.fechaCompra).fromNow();\n        });\n      }\n    )\n  }\n\n  async verDetalleCompra() {\n    const modal = await this.modalCtrl.create({\n      component: DetallesCompraPage\n    });\n    return await modal.present();\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Compra } from '../../interfaces/Compra';\nimport { ComprasResponse } from '../../interfaces/Responses';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class HistorialComprasService {\n  private readonly historialUrl = 'history';\n\n  constructor(private http: HttpClient) { }\n\n  obtenerHistorialCompras(): Observable<Compra[]> {\n    return this.http.get<ComprasResponse>(`profile/buy/${this.historialUrl}`).pipe(\n      map(resp => resp.data)\n    );\n  }\n}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Mis compras</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list>\\n    <ion-item *ngFor=\\\"let compra of compras\\\">\\n      <ion-row>\\n        <ion-col>\\n          <ion-label>\\n            <h2>Realizado: {{compra.fechaCompra}}</h2>\\n            <h2>Nº compra: {{compra.id}}</h2>\\n          </ion-label>\\n        </ion-col>\\n        <ion-col class=\\\"ion-align-items-center\\\">\\n          <ion-button size=\\\"small\\\" fill=\\\"clear\\\" (click)=\\\"verDetalleCompra()\\\">\\n            <ion-icon slot=\\\"icon-only\\\" name=\\\"eye\\\"></ion-icon>\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-item>\\n  </ion-list>\\n</ion-content>\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJoaXN0b3JpYWwtY29tcHJhcy5wYWdlLnNjc3MifQ== */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HistorialComprasPage } from './historial-compras.page';\nimport { RouterModule, Routes } from '@angular/router';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HistorialComprasPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [HistorialComprasPage]\n})\nexport class HistorialComprasPageModule {}\n"],"sourceRoot":"webpack:///"}